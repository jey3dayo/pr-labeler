
> pr-labeler@1.2.0 test:coverage /Users/t00114/src/github.com/jey3dayo/pr-labeler
> vitest run --coverage -- --reporter=text


 RUN  v4.0.1 /Users/t00114/src/github.com/jey3dayo/pr-labeler
      Coverage enabled with v8

 ✓ __tests__/pattern-matcher.test.ts (18 tests) 15ms
 ✓ __tests__/i18n-integrity.test.ts (33 tests) 14ms
 ✓ __tests__/error-factories-i18n.test.ts (22 tests) 12ms
 ✓ __tests__/errors.test.ts (53 tests) 12ms
 ✓ __tests__/directory-labeler/config-loader.test.ts (19 tests) 19ms
 ✓ __tests__/label-manager.test.ts (30 tests) 17ms
 ✓ __tests__/directory-labeler/integration.test.ts (9 tests) 19ms
 ✓ __tests__/comment-manager.test.ts (27 tests) 33ms
 ✓ __tests__/summary-writer.test.ts (5 tests) 15ms
 ✓ __tests__/report-formatter.test.ts (61 tests) 43ms
 ✓ __tests__/file-metrics.test.ts (20 tests) 88ms
 ✓ __tests__/formatting.test.ts (10 tests) 13ms
 ✓ __tests__/failure-evaluator.test.ts (23 tests) 12ms
 ✓ __tests__/actions-io.test.ts (35 tests) 35ms
 ✓ __tests__/i18n.test.ts (19 tests) 11ms
 ✓ __tests__/label-decision-engine.test.ts (33 tests) 12ms
 ✓ __tests__/directory-labeler/pattern-matcher.test.ts (23 tests) 5ms
 ✓ __tests__/size-parser.test.ts (17 tests) 3ms
 ✓ __tests__/directory-labeler/decision-engine.test.ts (14 tests) 8ms
 ✓ __tests__/base-error.test.ts (13 tests) 4ms
 ✓ __tests__/diff-strategy.test.ts (11 tests) 10ms
 ✓ __tests__/directory-labeler/apply-labels.test.ts (7 tests) 6ms
 ✓ __tests__/input-mapper.test.ts (26 tests) 7ms
 ✓ __tests__/complexity-analyzer.test.ts (12 tests) 58ms
 ✓ __tests__/config-loader.test.ts (25 tests) 8ms
 ✓ __tests__/index.test.ts (20 tests) 5ms
 ✓ __tests__/input-parser.test.ts (8 tests) 3ms
 ✓ __tests__/workflow/analysis-stage.test.ts (3 tests) 3ms
 ✓ __tests__/error-helpers.test.ts (19 tests) 3ms
 ✓ __tests__/directory-labeler/label-applicator.test.ts (8 tests) 4ms
 ✓ __tests__/workflow/finalization-stage.test.ts (2 tests) 3ms
 ✓ __tests__/config-builder.test.ts (10 tests) 3ms
 ✓ __tests__/labeler-config-validator.test.ts (12 tests) 3ms
 ✓ __tests__/selective-label-enabling.test.ts (20 tests) 3ms
 ❯ __tests__/workflow/labeling-stage.test.ts (12 tests | 10 failed) 7ms
     ✓ applies labels and directory labels successfully 2ms
     ✓ logs permission warning when label application returns 403 0ms
     × skips label application when decideLabels fails 3ms
     × warns when applyLabels fails without failing the action 0ms
     × fails the action when applyLabels errors and fail_on_error is true 0ms
     × handles FileSystemError when loading directory config 0ms
     × handles validation errors when loading directory config 0ms
     × warns when decideLabelsForFiles fails 0ms
     × skips when no directory labels match 0ms
     × handles applyDirectoryLabels permission errors 0ms
     × handles applyDirectoryLabels generic errors 0ms
     × logs directory labeling failures in detail 0ms
 ✓ __tests__/ci-status.test.ts (4 tests) 2ms
 ✓ __tests__/config-integration.test.ts (8 tests) 3ms
 ✓ __tests__/environment-loader.test.ts (9 tests) 2ms
 ✓ __tests__/workflow/pipeline-reexports.test.ts (1 test) 1ms
 ✓ __tests__/integration.test.ts (7 tests) 1312ms
       ✓ should run successfully with small PR  1305ms
 ✓ __tests__/label-applicator.test.ts (7 tests) 3013ms
       ✓ should handle permission errors (403)  3007ms

 Test Files  1 failed | 40 passed (41)
      Tests  10 failed | 705 passed (715)
   Start at  12:32:04
   Duration  3.51s (transform 2.35s, setup 445ms, collect 5.53s, tests 4.85s, environment 4ms, prepare 631ms)

 ELIFECYCLE  Command failed with exit code 1.
