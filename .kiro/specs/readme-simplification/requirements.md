# 要件定義書

## はじめに

PR Labelerプロジェクトの現在のREADME.mdは717行の詳細なドキュメントで、初見ユーザーには情報過多になっており、必要な情報にアクセスしにくい状態です。本要件では、README.mdを200-300行程度に簡素化し、詳細情報をdocs/ディレクトリに分離することで、ユーザビリティとメンテナンス性を向上させます。

### ビジネス価値

- **初見ユーザー**: 5分以内に基本的な使い方を理解し、導入を開始できる
- **既存ユーザー**: 高度な設定や詳細情報に素早くアクセスできる
- **メンテナー**: ドキュメント更新時の負担が軽減され、情報の一貫性が保たれる
- **グローバル対応**: 英語をメインとし、オプションで日本語版を提供することで、国際的なユーザーベースに対応

## 要件

### 要件1: README.md簡素化とクイックスタート重視

**目的**: ユーザーとして、簡潔で読みやすいREADME.mdを読み、サンプルをコピー＆ペーストするだけで即座にプロジェクトを試すことができるようにしたい

#### 受入基準

1. WHEN ユーザーがREADME.mdを開いたとき THEN README.mdは200-300行以内で構成されているものとする
2. WHEN ユーザーがREADME.mdを読むとき THEN 最初の50行以内にプロジェクト概要（2-3行）、バッジ、主要機能（3-5個の箇条書き）が表示されるものとする
3. WHEN ユーザーがクイックスタートを確認するとき THEN 完全にコピー可能な最小構成のworkflow例（10-15行）が明確に提示され、そのまま実行可能であるものとする
4. WHERE クイックスタートセクションにおいて、ユーザーが`.github/workflows/pr-check.yml`にコピー＆ペーストするだけで基本的な機能が動作する完全なサンプルが提供されるものとする
5. WHEN ユーザーがサンプルを実行するとき THEN PRサイズチェック機能が動作し、GitHub Actions Summaryにメトリクスが表示されるものとする
6. IF ラベル自動適用機能を使用する場合 THEN クイックスタートに「ラベルの事前作成が必要」という注意書きと、ラベル自動作成の設定例（`apply_labels: "false"`または手動作成手順）が明記されるものとする
7. IF ユーザーが詳細情報を必要とするとき THEN README.md内に適切なdocs/へのリンクが配置されているものとする
8. WHEN ユーザーが必要な権限情報を確認するとき THEN 最小限の権限設定例が明確に記載され、サンプルに含まれているものとする

### 要件2: README.md構造設計

**目的**: メンテナーとして、優先度の高い情報を上部に配置した明確な構造を持つREADME.mdを作成することで、ユーザーの情報アクセスを最適化したい

#### 受入基準

1. WHEN README.mdが構成されるとき THEN 以下のセクション順序で構成されるものとする
   - プロジェクトタイトルとバッジ
   - 簡潔な説明（1行）
   - 主要機能（3-5個）
   - クイックスタート
   - 必要な権限
   - ドキュメントリンク集
   - コントリビューション
   - ライセンス
2. WHERE 各セクションにおいて、詳細説明が必要な箇所には docs/への適切なリンクが配置されるものとする
3. WHEN ユーザーが特定の情報を探すとき THEN 目次（オプション）またはセクション見出しから素早くジャンプできるものとする
4. IF README.mdに画像やスクリーンショットが含まれるとき THEN 最小限（1-2枚）に留め、主要な使用例のみを示すものとする

### 要件3: 詳細ドキュメントの分離と構造化（シンプルかつ実践的）

**目的**: ユーザーとして、README.mdから分離された詳細ドキュメントにアクセスし、実践的なサンプルを通じて段階的に機能を理解したい

#### 受入基準

1. WHEN 詳細ドキュメントが作成されるとき THEN docs/ディレクトリに以下の最小限のファイルが配置されるものとする
   - `docs/configuration.md`: 入力パラメータの詳細とデフォルト値
   - `docs/advanced-usage.md`: 高度な使用例（実行可能なサンプル中心）
   - `docs/troubleshooting.md`: トラブルシューティングガイド
2. WHERE docs/configuration.md において、すべての入力パラメータ（file_size_limit、size_enabled等）が表形式で整理され、デフォルト値、説明、実例が記載されるものとする
3. WHERE docs/advanced-usage.md において、各セクション（フォークからのPR対応、条件付き実行等）が完全に実行可能なworkflowサンプルと共に説明されるものとする
4. WHERE docs/advanced-usage.md において、ユーザーがコピー＆ペーストで即座に試せる完全なサンプルが各ユースケースごとに提供されるものとする
5. WHERE docs/troubleshooting.md において、よくある問題（権限エラー、Draft PRスキップ等）が問題→原因→解決策の3ステップで簡潔に記載されるものとする
6. IF 既存のREADME.mdに記載されている情報が詳細ドキュメントに移動されるとき THEN その情報は完全に保持され、失われないものとする
7. WHEN docs/内のドキュメントが作成されるとき THEN 各ドキュメントは単独で理解可能であり、過度な相互参照を避けるものとする

### 要件4: 多言語対応の整理

**目的**: グローバルユーザーとして、英語のREADME.mdを読むことで、言語の壁なくプロジェクトを理解し、オプションで日本語版も利用できるようにしたい

#### 受入基準

1. WHEN README.mdが作成されるとき THEN 主要言語は英語で記載されるものとする
2. IF 日本語版が提供されるとき THEN README.ja.mdとして別ファイルで提供されるものとする
3. WHEN 英語版README.mdが更新されるとき THEN README.ja.mdも同期して更新されるべきであることがCONTRIBUTING.mdまたはドキュメントガイドラインに記載されるものとする
4. WHERE README.mdの冒頭において、他言語版が利用可能であることが明示され、リンクが提供されるものとする（例: 🇯🇵 [日本語版](README.ja.md)）
5. IF docs/内のドキュメントが多言語化されるとき THEN docs/en/とdocs/ja/のようなサブディレクトリ構造で整理されるものとする

### 要件5: 既存情報の保全とリンク整合性

**目的**: メンテナーとして、README.md簡素化後も既存の情報がすべて保持され、リンクが正しく機能することを保証したい

#### 受入基準

1. WHEN 既存のREADME.mdから情報が移動されるとき THEN すべての情報が適切なdocs/ファイルに完全に移行されるものとする
2. IF 外部からREADME.md内の特定セクションへのリンクが存在するとき THEN そのリンクが機能するよう、セクションIDまたはアンカーが保持されるものとする
3. WHEN README.mdまたはdocs/内でリンクが使用されるとき THEN すべての内部リンクが有効であり、404エラーを返さないものとする
4. WHERE 既存のREADME.mdに記載されていた設定例、コード例、パラメータ説明が THEN 対応するdocs/ファイルに完全に移行されるものとする
5. IF README.mdから削除されたセクションへの参照が他のドキュメントに存在するとき THEN その参照が新しいdocs/の該当セクションを指すよう更新されるものとする

### 要件6: ドキュメント品質とメンテナンス性

**目的**: メンテナーとして、高品質で一貫性のあるドキュメント構造を維持し、将来の更新を容易にしたい

#### 受入基準

1. WHEN docs/内のドキュメントが作成されるとき THEN 各ドキュメントは明確な見出し構造（H1-H4）を持つものとする
2. WHERE コード例が記載される箇所において、適切なシンタックスハイライト（`yaml, `bash等）が適用されるものとする
3. IF 複数のドキュメント間で共通の情報が存在するとき THEN 情報の重複を避け、適切なリンクで参照するものとする
4. WHEN 新しい機能が追加されるとき THEN 対応するドキュメント（README.mdまたはdocs/）が同時に更新されるべきであることが開発ガイドラインに記載されるものとする
5. WHERE docs/内の各ドキュメントにおいて、最終更新日やバージョン情報がメタデータとして記載されるものとする（オプション）
6. IF ドキュメント内に表が使用されるとき THEN Markdown表形式が正しく表示され、可読性が保たれるものとする

### 要件7: 参考実装とベストプラクティスの適用

**目的**: メンテナーとして、優れたGitHub Actionプロジェクトのドキュメント構造を参考にし、業界のベストプラクティスに従ったドキュメントを作成したい

#### 受入基準

1. WHEN README.md構造が設計されるとき THEN actions/checkoutやdocker/build-push-actionなどの優れたREADME例のパターンが参考にされるものとする
2. WHERE クイックスタートセクションにおいて、ユーザーがコピー＆ペーストで即座に使用できる完全なworkflow例が提供されるものとする
3. IF 入力パラメータがテーブルで記載されるとき THEN パラメータ名、必須/任意、デフォルト値、説明の列が含まれるものとする
4. WHEN バッジが使用されるとき THEN 関連性の高いバッジ（License、TypeScript、Test Coverage等）のみが表示され、過度に多くならないものとする
5. WHERE コントリビューションセクションにおいて、PRの作成方法やテストの実行方法への簡潔なリンクが提供されるものとする

## 非機能要件

### パフォーマンスとアクセシビリティ

1. WHEN README.mdに画像が含まれるとき THEN 各画像のファイルサイズが500KB以下に保たれ、画像の総数が3枚以下に制限されるものとする
2. WHERE docs/内のドキュメントにおいて、各ドキュメントのファイルサイズが100KB以下（推奨）に保たれるものとする
3. IF スクリーンリーダーが使用されるとき THEN セマンティックなMarkdown構造（適切な見出しレベル、alt属性等）により、適切に読み上げられるものとする

### 互換性と移行

1. WHEN README.mdが更新されるとき THEN 既存のブックマークや外部リンクが可能な限り機能し続けるものとする
2. IF README.mdの構造が変更されるとき THEN 変更内容がCHANGELOG.mdに記録されるものとする
3. WHERE 既存ユーザーが新しいドキュメント構造に移行するとき THEN 明確な移行ガイドまたはアナウンスが提供されるものとする（GitHub Issue #35のコメント等）
